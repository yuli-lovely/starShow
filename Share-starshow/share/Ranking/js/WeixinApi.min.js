var WeixinApi=function(){"use strict";function a(a,b){b=b||{};var c=function(a){WeixinJSBridge.invoke("shareTimeline",{appid:a.appId?a.appId:"",img_url:a.imgUrl,link:a.link,desc:a.desc,title:a.title,img_width:"120",img_height:"120"},function(a){switch(a.err_msg){case"share_timeline:cancel":b.cancel&&b.cancel(a);break;case"share_timeline:fail":b.fail&&b.fail(a);break;case"share_timeline:confirm":case"share_timeline:ok":b.confirm&&b.confirm(a)}b.all&&b.all(a)})};WeixinJSBridge.on("menu:share:timeline",function(d){b.async&&b.ready?(window._wx_loadedCb_=b.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),b.dataLoaded=function(a){window._wx_loadedCb_(a),c(a)},b.ready&&b.ready(d)):(b.ready&&b.ready(d),c(a))})}function b(a,b){b=b||{};var c=function(a){WeixinJSBridge.invoke("sendAppMessage",{appid:a.appId?a.appId:"",img_url:a.imgUrl,link:a.link,desc:a.desc,title:a.title,img_width:"120",img_height:"120"},function(a){switch(a.err_msg){case"send_app_msg:cancel":b.cancel&&b.cancel(a);break;case"send_app_msg:fail":b.fail&&b.fail(a);break;case"send_app_msg:confirm":case"send_app_msg:ok":b.confirm&&b.confirm(a);break;default:alert(a.err_msg)}b.all&&b.all(a)})};WeixinJSBridge.on("menu:share:appmessage",function(d){b.async&&b.ready?(window._wx_loadedCb_=b.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),b.dataLoaded=function(a){window._wx_loadedCb_(a),c(a)},b.ready&&b.ready(d)):(b.ready&&b.ready(d),c(a))})}function c(a,b){b=b||{};var c=function(a){WeixinJSBridge.invoke("shareWeibo",{content:a.desc,url:a.link},function(a){switch(a.err_msg){case"share_weibo:cancel":b.cancel&&b.cancel(a);break;case"share_weibo:fail":b.fail&&b.fail(a);break;case"share_weibo:confirm":case"share_weibo:ok":b.confirm&&b.confirm(a)}b.all&&b.all(a)})};WeixinJSBridge.on("menu:share:weibo",function(d){b.async&&b.ready?(window._wx_loadedCb_=b.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),b.dataLoaded=function(a){window._wx_loadedCb_(a),c(a)},b.ready&&b.ready(d)):(b.ready&&b.ready(d),c(a))})}function d(a,b){a&&b&&0!=b.length&&WeixinJSBridge.invoke("imagePreview",{current:a,urls:b})}function e(){WeixinJSBridge.call("showOptionMenu")}function f(){WeixinJSBridge.call("hideOptionMenu")}function g(){WeixinJSBridge.call("showToolbar")}function h(){WeixinJSBridge.call("hideToolbar")}function i(a){a&&"function"==typeof a&&WeixinJSBridge.invoke("getNetworkType",{},function(b){a(b.err_msg)})}function j(){WeixinJSBridge.call("closeWindow")}function k(a){if(a&&"function"==typeof a){var b=this,c=function(){a(b)};"undefined"==typeof window.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",c,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",c),document.attachEvent("onWeixinJSBridgeReady",c)):c()}}return{version:"1.8",ready:k,shareToTimeline:a,shareToWeibo:c,shareToFriend:b,showOptionMenu:e,hideOptionMenu:f,showToolbar:g,hideToolbar:h,getNetworkType:i,imagePreview:d,closeWindow:j}}();